# CSV Normalizer

–ù–µ–±–æ–ª—å—à–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ **Python + Streamlit** –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ–ª—å—à–∏—Ö CSV –ø–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ø—Ä–∞–≤–∏–ª–∞–º (YAML).  
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ñ–∞–π–ª–æ–≤ –æ—Ç –¥–µ—Å—è—Ç–∫–æ–≤ –º–µ–≥–∞–±–∞–π—Ç –¥–æ **–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–∏–≥–∞–±–∞–π—Ç** ‚Äî —á—Ç–µ–Ω–∏–µ –∏–¥—ë—Ç —á–∞–Ω–∫–∞–º–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∏—à–µ—Ç—Å—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ.  
–í–∞–∂–Ω–æ: —Å—Ç—Ä–æ–∫–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è ¬´–º–∞–≥–∏—á–µ—Å–∫–∏¬ª ‚Äî –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—à–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏—é, **–æ—á–∏—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —è—á–µ–π–∫–∞**.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÅ –£–¥–æ–±–Ω—ã–π UI: –≤—ã–±–æ—Ä –≤—Ö–æ–¥–Ω–æ–≥–æ CSV, **–ø–∞–ø–∫–∏** –∏ –∏–º—ë–Ω –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ CSV –∏ **txt-–ª–æ–≥–∞** (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π ¬´–ø—Ä–æ–≤–æ–¥–Ω–∏–∫¬ª).
- üß± –û–±—Ä–∞–±–æ—Ç–∫–∞ **—á–∞–Ω–∫–∞–º–∏** ‚Äî –Ω–µ –¥–µ—Ä–∂–∏–º –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç–∏.
- ‚öôÔ∏è –ü—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–∞–≤–∏–ª (YAML): –æ–¥–∏–Ω –∫–ª–∏–∫ ‚Äî –Ω—É–∂–Ω—ã–π –Ω–∞–±–æ—Ä –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–π.
- üîé –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–≤—ã—Ö 200 —Å—Ç—Ä–æ–∫ (—É—á–∏—Ç—ã–≤–∞—è –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å/–∫–æ–¥–∏—Ä–æ–≤–∫—É).
- üßπ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤:
  - **–§–ò–û**: `lastname`, `firstname`, `middlename`, `fullname`
  - **email**, **phone**, **birthdate**, **ip_address`
- ‚ôªÔ∏è **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** (–ø–æ –≥–∞–ª–æ—á–∫–µ) –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–æ–ª—é ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ.
- üßæ –ü–æ–¥—Ä–æ–±–Ω—ã–π **txt-–ª–æ–≥**: —Å–≤–æ–¥–∫–∞, —Ä–∞–∑–¥–µ–ª—ã –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º, –ø—Ä–∏–º–µ—Ä—ã ¬´–±—ã–ª–æ ‚Üí —Å—Ç–∞–ª–æ¬ª.
- ‚¨áÔ∏è –ö–Ω–æ–ø–∫–∏ ¬´–°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç¬ª –∏ ¬´–°–∫–∞—á–∞—Ç—å –ª–æ–≥¬ª –ø—Ä—è–º–æ –≤ UI.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install streamlit pandas pyyaml

# (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞–º–∏ –∏ —Ç.–ø.)
# pip install -e .[dev]

# 2) –ó–∞–ø—É—Å—Ç–∏—Ç—å UI
streamlit run app/main.py
```

–î–∞–ª–µ–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
1. –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ö–æ–¥–Ω–æ–π CSV (–ø—É—Ç—å –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞).
2. –£–∫–∞–∂–∏—Ç–µ –ø–∞–ø–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `normalized.csv`, `normalize_log.txt`).
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∞–≤–∏–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `configs/profiles/uni.yaml`).
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–¥–∞–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (`,` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ –∫–æ–¥–∏—Ä–æ–≤–∫—É (`auto` / `utf-8` / `cp1251` / `latin1`).
5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í–∫–ª—é—á–∏—Ç–µ **–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é** –∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–µ.
6. –ù–∞–∂–º–∏—Ç–µ **–ó–∞–ø—É—Å—Ç–∏—Ç—å**. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏ ¬´–°–∫–∞—á–∞—Ç—å CSV¬ª –∏ ¬´–°–∫–∞—á–∞—Ç—å –ª–æ–≥¬ª.

---

## üß© –ü—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–∞–≤–∏–ª

–ü—Ä–æ—Ñ–∏–ª—å ‚Äî —ç—Ç–æ YAML —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏ –Ω–∞–±–æ—Ä–æ–º –ø—Ä–∞–≤–∏–ª –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º.  
–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å **`configs/profiles/uni.yaml`**.

–ü—Ä–∏–º–µ—Ä (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π `uni.yaml`):

```yaml
profile: "uni"
version: 1

global:
  delimiter: ","
  encoding: "auto"
  deduplicate:
    enabled: false
    subset: []
    ignore_empty_in_subset: true
  logging:
    detail_level: "full"

columns:
  email:
    rules:
      - strip_whitespace: {}
      - sanitize_invisible: {}
      - to_lower: {}
      - email_basic:
          pattern: "^(.{2,}@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6})?$"
          on_fail: "clear_cell"
          clear_value: ""

  ip_address:
    rules:
      - ip_basic: {}

  phone:
    rules:
      - phone_digits_len:
          min_len: 9
          max_len: 13

  birthdate:
    rules:
      - birthdate_basic:
          pivot_year: 25

  lastname:
    rules:
      - name_basic: {min_letters: 3}
  firstname:
    rules:
      - name_basic: {min_letters: 3}
  middlename:
    rules:
      - name_basic: {min_letters: 3}
  fullname:
    rules:
      - name_basic: {min_letters: 3}
```

> –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –¥–∞–Ω–Ω—ã—Ö –∫–æ–ª–æ–Ω–∫–∏ —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

---

## üõ† –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### –§–ò–û (`lastname`, `firstname`, `middlename`, `fullname`)
- –¢—Ä–∏–º –ø–æ –∫—Ä–∞—è–º; **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –Ω–µ —Ç—Ä–æ–≥–∞–µ–º**.  
- –î–µ—Ñ–∏—Å—ã –∏ –∞–ø–æ—Å—Ç—Ä–æ—Ñ—ã –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ **–æ–¥–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ–±–µ–ª**.  
- –£–¥–∞–ª—è–µ–º –≤—Å—ë, —á—Ç–æ –Ω–µ –±—É–∫–≤–∞/–ø—Ä–æ–±–µ–ª (Unicode-–±—É–∫–≤—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è).  
- **Title Case** (–∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π, –Ω–µ —Å—Ö–ª–æ–ø—ã–≤–∞—è –ø—Ä–æ–±–µ–ª—ã).  
- –ï—Å–ª–∏ –±—É–∫–≤ < **3** ‚Äî –æ—á–∏—â–∞–µ–º —è—á–µ–π–∫—É.

### `birthdate`
- –ü—Ä–∏–≤–æ–¥–∏–º –∫ —Ñ–æ—Ä–º–∞—Ç—É **`dd/mm/yyyy`** –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (`dd-mm-yy`, `yyyymmdd`, `ddmmyy`, –∏ —Ç.–ø.).  
- –ë—É–∫–≤—ã ‚Üí –æ—á–∏—â–∞–µ–º —è—á–µ–π–∫—É.  
- –î–≤—É–∑–Ω–∞—á–Ω—ã–π –≥–æ–¥ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º: `00‚Äì24 ‚Üí 2000‚Äì2024`, `25‚Äì99 ‚Üí 1900‚Äì1999`.  
- *–ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é (—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã) –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ–º.*

### `phone`
- –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ **—Ü–∏—Ñ—Ä—ã**; –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ –Ω–µ –≤ **[9, 13]** ‚Äî –æ—á–∏—â–∞–µ–º —è—á–µ–π–∫—É.

### `email`
- –¢—Ä–∏–º ‚Üí —É–±—Ä–∞—Ç—å –Ω–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã ‚Üí **–Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä**.  
- –í–∞–ª–∏–¥–∞—Ü–∏—è regex:  
  `^(.{2,}@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6})?$`  
  –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ ‚Äî –æ—á–∏—â–∞–µ–º —è—á–µ–π–∫—É.

### `ip_address`
- –ü—Ä–æ—Å—Ç–∞—è –º–∞—Å–∫–∞: `^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$`  
  –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ ‚Äî –æ—á–∏—â–∞–µ–º. *(–î–∏–∞–ø–∞–∑–æ–Ω—ã 0‚Äì255 –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º.)*

---

## üîÅ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

- –í–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ–∫–±–æ–∫—Å–æ–º; –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è **–ø–æ–ª–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `email`).  
- –ü–æ—Ç–æ–∫–æ–≤–∞—è: —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥—É–±–ª–∏ **–º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏**.  
- –°–æ—Ö—Ä–∞–Ω—è–µ–º **–ø–µ—Ä–≤–æ–µ** –≤—Ö–æ–∂–¥–µ–Ω–∏–µ; –ø—É—Å—Ç—ã–µ –∫–ª—é—á–∏ –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.  
- –í –æ—Ç—á—ë—Ç–µ ‚Äî —á–∏—Å–ª–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.

---

## üßæ –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞ (.txt)

–í –Ω–∞—á–∞–ª–µ ‚Äî –æ–±—â–∞—è —Å–≤–æ–¥–∫–∞: –¥–∞—Ç–∞/–≤—Ä–µ–º—è, –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥, —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫, —Å—Ç–æ–ª–±—Ü—ã, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å/–∫–æ–¥–∏—Ä–æ–≤–∫–∞, —Å—Ç–∞—Ç—É—Å –¥–µ–¥—É–ø–∞.  
–î–∞–ª–µ–µ ‚Äî —Ä–∞–∑–¥–µ–ª—ã –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```
======== –û–¢–ß–Å–¢ –ù–û–†–ú–ê–õ–ò–ó–ê–¶–ò–ò ========
–î–∞—Ç–∞/–≤—Ä–µ–º—è: 2025-09-30 12:34:56
–§–∞–π–ª –≤—Ö–æ–¥–Ω–æ–π: data/input.csv
–§–∞–π–ª –≤—ã—Ö–æ–¥–Ω–æ–π: out/normalized.csv
–°—Ç—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 1234567
–°—Ç–æ–ª–±—Ü—ã: email, phone, birthdate, ip_address, lastname, firstname
–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: ,
–ö–æ–¥–∏—Ä–æ–≤–∫–∞: auto
–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è: –í–ö–õ
====================================

================ –ü–û–ß–¢–ê ==============
[email] —è—á–µ–µ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ: 4982
[email] —è—á–µ–µ–∫ –æ—á–∏—â–µ–Ω–æ –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: 73
[email] —Å—Ç—Ä–æ–∫–∞ 1023: "Iv anov @gmail .com" ‚Üí "ivanov@gmail.com" (normalized)
[email] —Å—Ç—Ä–æ–∫–∞ 2044: "user@@gmal..com" ‚Üí "" (cleared (regex not matched))

...

================ –î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–Ø ==============
–°—Ç–∞—Ç—É—Å: –í–ö–õ–Æ–ß–ï–ù–ê
–ü–æ–ª–µ(—è): email
–£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: 112

=============== –ö–û–ù–ï–¶ –û–¢–ß–Å–¢–ê ===============
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app/                     # Streamlit UI
core/
  io/                    # —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å CSV (—á–∞–Ω–∫–∞–º–∏)
  rules/                 # –ø—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤
  pipeline/              # —Ä–µ–µ—Å—Ç—Ä –ø—Ä–∞–≤–∏–ª + —Ä–∞–Ω–Ω–µ—Ä (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)
  dedup/                 # –ø–æ—Ç–æ–∫–æ–≤–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
  logging/               # —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å txt-–æ—Ç—á—ë—Ç–∞
configs/
  profiles/              # YAML-–ø—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–∞–≤–∏–ª (uni.yaml ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
.streamlit/              # —Ç–µ–º–∞/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Streamlit
```

---

## üß≠ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (–∫—Ä–∞—Ç–∫–æ)

- –ü—Ä–æ—Ñ–∏–ª–∏ —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º (`uni` ‚Üí `usa` ‚Üí overlay).
- –¢–µ–ª–µ—Ñ–æ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç **E.164** (—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞).
- –î–∞—Ç—ã —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (–ø–æ –∂–µ–ª–∞–Ω–∏—é).
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä–∏ (`map_values`), –æ—Ç—á—ë—Ç –ø–æ ¬´–Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–º¬ª.
- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –µ—â—ë –∏ –≤ JSON (–¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞).

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî —Å–º. —Ñ–∞–π–ª `LICENSE`.
